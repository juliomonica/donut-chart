{"version":3,"sources":["components/pie.donut.component.js","App.js","index.js"],"names":["Pie","props","colors","dataName","currencySymbol","dataId","id","ref","useRef","createPie","d3","value","d","sort","createArc","innerRadius","outerRadius","createArc2","domain","range","revenueColors","format","useEffect","data","groupWithData","current","selectAll","exit","remove","groupWithUpdate","enter","append","attr","merge","select","i","style","text","replace","className","width","height","transform","App","impresionsColors","visitsColors","values","values2","values3","useState","setData","totalRevenue","tabletR","percentOfTabletR","Math","round","percentOfSmartphoneR","totalImpresions","tabletI","percentOfTabletI","percentOfSmartphoneI","totalVisits","tabletV","percentOfTabletV","percentOfSmartphoneV","console","log","onClick","map","item","undefined","random","color","toLocaleString","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.39e67ebc.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport  \"./pie.donut.styles.css\";\r\n\r\n//console.log('Not THE re-render')\r\nconst Pie = props => {\r\n  //console.log(props.data)\r\n  const dataId = props.id;  \r\n  \r\n  \r\n  const ref = useRef(null);\r\n  const createPie = d3\r\n    .pie()\r\n    .value(d => d.value)\r\n    .sort(null);\r\n  const createArc = d3\r\n    .arc()\r\n    .innerRadius(props.innerRadius)\r\n    .outerRadius(props.outerRadius);\r\n  const createArc2 = d3\r\n    .arc()\r\n    .innerRadius(props.innerRadius-10)\r\n    .outerRadius(props.outerRadius-10);\r\n  let colors; \r\n  let dataName; \r\n  let currencySymbol;\r\n  switch (dataId) {\r\n    case 1:\r\n      colors = d3.scaleOrdinal(d3.schemeCategory10)\r\n      .domain([\"Dark Green\",\"Light Green\"])\r\n      .range(props.revenueColors);\r\n      dataName = 'REVENUE';\r\n      currencySymbol ='€';\r\n      break;\r\n    case 2:\r\n      colors = d3.scaleOrdinal(d3.schemeCategory10)\r\n      .domain([\"Dark Blue\",\"Light Blue\"])\r\n      .range([\"#2d4d63\",\"#6fc6e0\"]);\r\n      dataName = 'IMPRESIONS';\r\n      currencySymbol ='';\r\n      break;\r\n    case 3:\r\n      colors = d3.scaleOrdinal(d3.schemeCategory10)\r\n      .domain([\"Orange\",\"Yellow\"])\r\n      .range([\"#bb5414\",\"#ecc22c\"]);\r\n      dataName = 'VISITS';\r\n      currencySymbol ='';\r\n      break;\r\n    default:\r\n      colors = d3.scaleOrdinal(d3.schemeCategory10)\r\n      .domain([\"Dark Green\",\"Light Green\"])\r\n      .range([\"#396619\",\"#84d037\"]);\r\n      dataName = 'UNKNOWN';\r\n      currencySymbol ='';\r\n  } \r\n  \r\n  const format = d3.format(\",d\");\r\n  //const format = d3.format(\".2f\");\r\n  \r\n  useEffect(    \r\n    () => {\r\n      const data = createPie(props.data);\r\n      //console.log('New re-render', props.data)\r\n\r\n      const group = d3.select(ref.current);\r\n      const groupWithData = group.selectAll(\"g.arc\").data(data);\r\n\r\n      groupWithData.exit().remove();\r\n\r\n      const groupWithUpdate = groupWithData\r\n        .enter()\r\n        .append(\"g\")\r\n        .attr(\"class\", \"arc\");\r\n\r\n      const path = groupWithUpdate\r\n        .append(\"path\")\r\n        .merge(groupWithData.select(\"path.arc\"));\r\n\r\n      path\r\n        .attr(\"class\", \"arc\")\r\n        .attr(\"d\", createArc)\r\n        .attr(\"fill\", (d, i) => colors(i));\r\n\r\n      const path2 = groupWithUpdate\r\n        .append(\"path\")\r\n\r\n      path2\r\n        .attr(\"class\", \"arc\")\r\n        .attr(\"d\", createArc2)\r\n        //.attr(\"d\", createArc2)\r\n        .attr(\"fill\", \"white\");\r\n        \r\n      \r\n      const text = groupWithUpdate\r\n        .append(\"text\")\r\n        .merge(groupWithData.select(\"text\"));        \r\n      text        \r\n        .attr(\"dy\", \"0.4em\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"fill\", \"black\")\r\n        .style(\"font-size\", 30)\r\n        .style(\"font-weight\", 0)\r\n        .text((format(props.data[0].value+props.data[1].value)+currencySymbol).replace(/,/gi,'.'));\r\n\r\n      const text2 = groupWithUpdate\r\n        .append(\"text\")\r\n        .merge(groupWithData.select(\"text2\")); \r\n      text2        \r\n        .attr(\"dy\", \"-1em\")\r\n        .style(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", 20)\r\n        .style('fill', 'grey')\r\n        .text(dataName);\r\n    },[props.data]);\r\n\r\n  return (\r\n    <div className=\"svg\"> \r\n    <svg width={props.width} height={props.height}>\r\n      <g\r\n        ref={ref}\r\n        transform={`translate(${props.outerRadius} ${props.outerRadius})`}\r\n      />\r\n    </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pie;\r\n","import React, { useState, useEffect } from \"react\";\nimport PieDonut from \"./components/pie.donut.component\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const revenueColors=[\"#396619\",\"#84d037\"];\n  const tabletRevenue = { 'value': 120000 };\n  const smartphoneRevenue = {'value':80000};\n\n  const impresionsColors=[\"#2d4d63\",\"#6fc6e0\"];\n  const tabletImpresions = { 'value': 20000000 };\n  const smartphoneImpresions = {'value':30000000};\n\n  const visitsColors=[\"#bb5414\",\"#ecc22c\"];\n  const tabletVisits = { 'value': 480000000 };\n  const smartphoneVisits = {'value':120000000};\n  \n  const values = [smartphoneRevenue, tabletRevenue, ];\n  const values2 = [smartphoneImpresions, tabletImpresions];\n  const values3 = [smartphoneVisits, tabletVisits];\n\n  const generateData = (value) =>\n    values.map((item)=> ({\n    value: value === null || value === undefined  ? Math.round(item.value*Math.random()) : value\n    \n  }));\n  \n  const [data, setData] = useState(values);\n\n  const totalRevenue=data[0].value+data[1].value;\n  const tabletR=data[1].value;\n  const percentOfTabletR=Math.round((tabletR*100)/(totalRevenue));\n  const percentOfSmartphoneR=(100-percentOfTabletR);\n\n  const totalImpresions=values2[0].value+values2[1].value;\n  const tabletI=values2[1].value;\n  const percentOfTabletI=Math.round((tabletI*100)/(totalImpresions));\n  const percentOfSmartphoneI=(100-percentOfTabletI);\n\n  const totalVisits=values3[0].value+values3[1].value;\n  const tabletV=values3[1].value;\n  const percentOfTabletV=Math.round((tabletV*100)/(totalVisits));\n  const percentOfSmartphoneV=(100-percentOfTabletV);\n\n  const changeData = () => {\n    setData(generateData());    \n  };\n  useEffect(() => {\n      //console.log(data)\n    },[data]);\n\n  console.log(data[0].value)\n  //console.log(values2)\n  //console.log(values3)\n  return (\n    <div className=\"App\">\n        <button className=\"custom-button\" onClick={changeData}>Revenue</button>\n      <div className=\"item\">\n        <span className=\"label-t\" style={{color: revenueColors[1]}}>\n          Tablet\n          <ul className=\"ul-t\" style={{color: \"black\"}}>{percentOfTabletR}% {((data[1].value).toLocaleString('en-US')).replace(/,/gi,'.')}€</ul> \n        </span>\n        <PieDonut\n          id={1}\n          data={data}\n          width={200}\n          height={200}\n          innerRadius={90}\n          outerRadius={100}\n          revenueColors={revenueColors}\n        />\n        <span className=\"label\" style={{color: revenueColors[0]}}> Smartphone\n          <ul className=\"ul\" style={{color: \"black\"}}>{percentOfSmartphoneR}% {((data[0].value).toLocaleString('en-US')).replace(/,/gi,'.')}€</ul> \n        </span>\n              \n      </div>\n      <div className=\"item\">\n      <span className=\"label-t\" style={{color: impresionsColors[1]}}>Tablet\n        <ul className=\"ul-t\" style={{color: \"black\"}}>{percentOfTabletI}% {((values2[1].value).toLocaleString('en-US')).replace(/,/gi,'.')}</ul> \n      </span>\n\n        <PieDonut\n          id={2}\n          data={values2}\n          width={200}\n          height={200}\n          innerRadius={90}\n          outerRadius={100}\n          impresionsColors={impresionsColors}\n        />\n        <span className=\"label\" style={{color: impresionsColors[0]}}>Smartphone\n          <ul className=\"ul\" style={{color: \"black\"}}>{percentOfSmartphoneI}% {((values2[0].value).toLocaleString('en-US')).replace(/,/gi,'.')}</ul>\n        </span>\n      </div>\n      <div className=\"item\">\n      <span className=\"label-t\" style={{color: visitsColors[1]}}>Tablet \n        <ul className=\"ul-t\" style={{color: \"black\"}}>{percentOfTabletV}% {((values3[1].value).toLocaleString('en-US')).replace(/,/gi,'.')}</ul> \n        </span>\n        <PieDonut\n          id={3}\n          data={values3}\n          width={200}\n          height={200}\n          innerRadius={90}\n          outerRadius={100}\n          visitsColors={visitsColors}\n        />\n        <span className=\"label\" style={{color: visitsColors[0]}}>Smartphone\n          <ul className=\"ul\" style={{color: \"black\"}}>{percentOfSmartphoneV}% {((values3[0].value).toLocaleString('en-US')).replace(/,/gi,'.')}</ul> \n        </span>\n      </div>\n    </div>\n  );\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}